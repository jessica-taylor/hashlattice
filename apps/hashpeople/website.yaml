data:
  libComp: !includeYaml ./lib.yaml
  templates:
    "profile.html": !includeBinary ./profile.html
code: |
  function(hl) {
    var lib = evalComputation(libComp)(hl);
    var match = /profile?publicKey=(.*)/.match(hl.path);
    hashData({hash: <hash of the website>, key: <data key>})
    if (match) {
      var profile = lib.getProfile(match[1]);
      if (profile) {
        var html = _.template(
          templates['profile.html'].toString('utf8'),
          {viewName: profile.name,
           viewImage: profile.imageHash.toString('hex'),
           viewDescription: profile.description});
        return {
          headers: {
            "Content-Type": "text/html"
          },
          content: html
        };
      } else {
        return {
          headers: {"Content-Type": "text/plain"},
          content: "Profile not found!"
        };
      }
    } else {
      return {
        headers: {"Content-Type": "text/plain"},
        content: "Bad URL."
      };
    }
  }
